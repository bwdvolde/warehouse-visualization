(function(e){function t(t){for(var i,s,a=t[0],c=t[1],l=t[2],d=0,h=[];d<a.length;d++)s=a[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&h.push(r[s][0]),r[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(h.length)h.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,a=1;a<n.length;a++){var c=n[a];0!==r[c]&&(i=!1)}i&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},r={app:0},o=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"41ad":function(e,t,n){"use strict";var i=n("58e8"),r=n.n(i);r.a},"45a3":function(e,t,n){"use strict";var i=n("dcdd"),r=n.n(i);r.a},"58e8":function(e,t,n){},"5c0b":function(e,t,n){"use strict";var i=n("9c0c"),r=n.n(i);r.a},"9c0c":function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ConfigurationSelector"),e.model?n("div",{staticClass:"wrapper",attrs:{id:"app"}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-md-8 col-lg-9 mb-2"},[n("svg",{staticClass:"warehouse",attrs:{id:"svg"}}),n("TimeDisplay")],1),n("div",{staticClass:"col-12 col-md-4 col-lg-3"},[n("Details",{attrs:{model:e.model}})],1)])]):e._e()],1)},o=[],s=(n("a4d3"),n("4de4"),n("5db7"),n("4160"),n("4e82"),n("73d9"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("ade3")),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bg-primary"},[n("div",{staticClass:"navbar-brand"},[e._v("Configurations")]),e._m(0),n("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarNavDropdown"}},[n("ul",{staticClass:"navbar-nav"},[e._l(e.configurations,(function(t){return n("li",{key:t.name,staticClass:"nav-item",class:{active:t===e.selectedConfiguration},on:{click:function(n){return e.generateModel(t)}}},[n("a",{staticClass:"nav-link",attrs:{href:"#"}},[e._v(e._s(t.name))])])})),n("li",{staticClass:"nav-item active",on:{click:function(t){return e.showCreateConfigurationModal()}}},[n("a",{staticClass:"nav-link",attrs:{href:"#"}},[n("Icon",{staticClass:"ml-1",attrs:{icon:"plus"}})],1)]),n("CreateConfigurationModal",{ref:"create-configuration-modal",on:{configurationCreated:function(t){return e.addAndSelectConfiguration(t)}}})],2)])])},c=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation"}},[n("span",{staticClass:"navbar-toggler-icon"})])}],l=(n("b0c0"),n("d3b7"),n("ddb0"),n("d4ec")),u=n("bee2"),d=function(){function e(t,n,i,r,o,s){Object(l["a"])(this,e),this.name=t,this.aisles=n,this.blocks=i,this.cellsPerBlock=r,this.strategy=o,this.duration=s}return Object(u["a"])(e,[{key:"nRows",get:function(){return this.blocks*(this.cellsPerBlock+1)+1}},{key:"nCols",get:function(){return 2*this.aisles}}],[{key:"createEmpty",value:function(){return new e("",3,3,3,h.SERIAL,100)}}]),e}(),h=function e(t){Object(l["a"])(this,e),this.name=t};h.SERIAL=new h("Serial"),h.RANDOM=new h("Random"),h.values=[h.SERIAL,h.RANDOM];var f=n("2f62"),p=(n("d81d"),n("2909")),v=function e(t,n){Object(l["a"])(this,e),this.a=t,this.b=n},m=function e(t,n){Object(l["a"])(this,e),this.dx=t,this.dy=n};m.UP=new m(0,-1),m.DOWN=new m(0,1),m.RIGHT=new m(1,0),m.LEFT=new m(-1,0),m.NONE=new m(0,0);var b,g=function(){function e(t,n){Object(l["a"])(this,e),this.x=t,this.y=n}return Object(u["a"])(e,[{key:"plus",value:function(t){return new e(this.x+t.dx,this.y+t.dy)}},{key:"minus",value:function(t){return new e(this.x-t.dx,this.y-t.dy)}},{key:"up",value:function(){return this.plus(m.UP)}},{key:"down",value:function(){return this.plus(m.DOWN)}},{key:"right",value:function(){return this.plus(m.RIGHT)}},{key:"left",value:function(){return this.plus(m.LEFT)}}]),e}();(function(e){e[e["NONE"]=0]="NONE",e[e["CELL"]=1]="CELL",e[e["DRONE"]=2]="DRONE"})(b||(b={}));var y=function(){function e(){Object(l["a"])(this,e),this._selectedCell=null,this._selectedDrone=null,this.hoveredCell=null,this.hoveredDrone=null}return Object(u["a"])(e,[{key:"hasSelection",value:function(){return this._selectedCell||this._selectedDrone}},{key:"mode",get:function(){return this._selectedCell?b.CELL:this._selectedDrone?b.DRONE:b.NONE}},{key:"selectedDrone",set:function(e){this._selectedDrone=e,this._selectedCell=null},get:function(){return this._selectedDrone}},{key:"selectedCell",set:function(e){this._selectedCell=e,this._selectedDrone=null},get:function(){return this._selectedCell}}]),e}(),O=function(){function e(t,n){Object(l["a"])(this,e),this.cells=n,this.drones=t,this.buildEdges(this.cells),this.selection=new y}return Object(u["a"])(e,[{key:"buildEdges",value:function(e){this.edges=[];for(var t=0;t<e.length;t++)for(var n=0;n<e[t].length;n++)this.pushEdgeDownIfExists(t,n),this.pushEdgeRightIfExists(t,n)}},{key:"pushEdgeRightIfExists",value:function(e,t){var n=t<this.nCols-1&&(t%2==0||!this.cells[e][t+1].isStorageCell);n&&this.pushEdgeRight(e,t)}},{key:"pushEdgeRight",value:function(e,t){var n=new g(t,e),i=new g(t+1,e),r=new v(n,i);this.edges.push(r)}},{key:"pushEdgeDownIfExists",value:function(e,t){e>=this.nRows-1||this.pushEdgeDown(e,t)}},{key:"pushEdgeDown",value:function(e,t){var n=new g(t,e),i=new g(t,e+1),r=new v(n,i);this.edges.push(r)}},{key:"calculateExecutionTime",value:function(){var e=Math.max.apply(Math,Object(p["a"])(this.drones.map((function(e){return e.operations.length}))));return 1e3*e}},{key:"nAisles",get:function(){return Math.ceil(this.cells[0].length/2)}},{key:"nCols",get:function(){return 2*this.nAisles}},{key:"nRows",get:function(){return this.cells.length}}]),e}(),w=(n("99af"),function(){function e(t,n,i,r){Object(l["a"])(this,e),this.x=t,this.y=n,this.isStorageCell=i,this.timeAtLastScan=r,this.visits=[]}return Object(u["a"])(e,[{key:"timeSinceLastScanAt",value:function(e){return e-this.timeAtLastScan}},{key:"toString",value:function(){return"(".concat(this.x,", ").concat(this.y,")")}}]),e}()),C=function(){function e(t,n,i,r){Object(l["a"])(this,e),this.id=t,this.speed=n,this.operations=i,this.timeOnArrivalAtOrigin=0,this.origin=r,this.direction=m.NONE,this.visits=[]}return Object(u["a"])(e,[{key:"positionAt",value:function(e){var t=e-this.timeOnArrivalAtOrigin,n=this.origin.x+t*this.direction.dx*this.speed/1e3,i=this.origin.y+t*this.direction.dy*this.speed/1e3;return new g(n,i)}}]),e}();function _(e,t){return e%(t.cellsPerBlock+1)===0}var j=function(){function e(){Object(l["a"])(this,e)}return Object(u["a"])(e,null,[{key:"choice",value:function(e){return e[Math.floor(Math.random()*e.length)]}}]),e}(),k=function e(t,n){Object(l["a"])(this,e),this.name=t,this.direction=n};function x(e,t){var n=[],i=t.duration,r=e,o=!0;function s(e){i>0&&(n.push(e),r=r.plus(e.direction),i-=1)}function a(){for(var e=0;e<t.nCols-1;e++)s(k.LEFT)}while(i>0){var c=r.y===t.nRows-1,l=0===r.y,u=r.x===t.nCols-1;c&&o?(s(k.RIGHT),o=!1):l&&!o?(u?a():s(k.RIGHT),o=!0):(_(r.y,t)||s(k.SCAN),s(o?k.DOWN:k.UP))}return n}function D(e,t){var n=[],i=t.duration,r=e;function o(e){i>0&&(n.push(e),r=r.plus(e.direction),i-=1)}function s(){var e=[],n=r.y>0;n&&e.push(k.UP);var i=r.y<t.nRows-1;i&&e.push(k.DOWN);var o=r.x>0&&(_(r.y,t)||r.x%2===1);o&&e.push(k.LEFT);var s=r.x<t.nCols-1&&(_(r.y,t)||r.x%2===0);return s&&e.push(k.RIGHT),e}while(i>0){var a=s(),c=j.choice(a);o(c),_(r.y,t)||o(k.SCAN)}return n}function S(e){var t=E(e),n=T(e);return new O(n,t)}function E(e){for(var t=[],n=0;n<e.nRows;n++){for(var i=[],r=0;r<e.nCols;r++){var o=!_(n,e),s=new w(r,n,o,-5e4);i.push(s)}t.push(i)}return t}function T(e){for(var t=[],n=0;n<e.nCols;n+=2){var i=n/2+"",r=new g(n,0),o=new C(i,1,A(r,e),r);t.push(o)}return t}function A(e,t){switch(t.strategy){case h.SERIAL:return x(e,t);case h.RANDOM:return D(e,t)}}k.UP=new k("UP",m.UP),k.DOWN=new k("DOWN",m.DOWN),k.LEFT=new k("LEFT",m.LEFT),k.RIGHT=new k("RIGHT",m.RIGHT),k.SCAN=new k("SCAN",m.NONE),k.moveOperations=[k.UP,k.DOWN,k.LEFT,k.RIGHT];var P="model",N={model:null,configurations:[new d("Serial 5x5",5,5,5,h.SERIAL,1e3),new d("Random 4x4",4,4,5,h.RANDOM,1e3)],selectedConfiguration:null},R={generateModel:function(e,t){e.selectedConfiguration=t,e.model=S(t)},addConfiguration:function(e,t){e.configurations.push(t)}},M={},L={namespaced:!0,state:N,mutations:R,actions:M},I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{ref:"modal",attrs:{title:"Create configuration","ok-disabled":!e.isValid()},on:{ok:e.onModalOk}},[n("div",{staticClass:"form-row"},[n("div",{staticClass:"form-group col"},[n("label",{attrs:{for:"name"}},[e._v("Name")]),n("Input",{attrs:{state:e.isValidName(),id:"name"},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}}),n("InvalidFeedback",[e._v("Name is required and must be unique")])],1)]),n("h6",[e._v("Dimensions")]),n("div",{staticClass:"form-row"},[n("div",{staticClass:"form-group col-12 col-sm-4"},[n("label",{attrs:{for:"aisles"}},[e._v("Aisles")]),n("Select",{attrs:{id:"aisles",options:[1,2,3,4,5]},model:{value:e.model.aisles,callback:function(t){e.$set(e.model,"aisles",t)},expression:"model.aisles"}})],1),n("div",{staticClass:"form-group col-12 col-sm-4"},[n("label",{attrs:{for:"blocks"}},[e._v("Blocks")]),n("Select",{attrs:{id:"blocks",options:[1,2,3,4,5]},model:{value:e.model.blocks,callback:function(t){e.$set(e.model,"blocks",t)},expression:"model.blocks"}})],1),n("div",{staticClass:"form-group col-12 col-sm-4"},[n("label",{attrs:{for:"cells-per-block"}},[e._v("Cells per block")]),n("Select",{attrs:{id:"cells-per-block",options:[1,2,3,4,5]},model:{value:e.model.cellsPerBlock,callback:function(t){e.$set(e.model,"cellsPerBlock",t)},expression:"model.cellsPerBlock"}})],1)]),n("h6",[e._v("Other")]),n("div",{staticClass:"form-row"},[n("div",{staticClass:"form-group col-12 col-sm-6"},[n("label",{attrs:{for:"duration"}},[e._v("Duration")]),n("Input",{attrs:{state:e.isValidDuration(),id:"duration"},model:{value:e.model.duration,callback:function(t){e.$set(e.model,"duration",t)},expression:"model.duration"}}),n("InvalidFeedback",[e._v("Duration is required and must be larger than 0")])],1),n("div",{staticClass:"form-group col-12 col-sm-6"},[n("label",{attrs:{for:"strategy"}},[e._v("Strategy")]),n("StrategySelect",{attrs:{id:"strategy"},model:{value:e.model.strategy,callback:function(t){e.$set(e.model,"strategy",t)},expression:"model.strategy"}})],1)])])},B=[],W=(n("caad"),n("2532"),n("6aac")),$=n("4797"),G=n("8361"),V=n("3010"),H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Select",{attrs:{options:e.options},model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}})},F=[],U={components:{Select:G["a"]},props:{value:{type:h,required:!0}},computed:{localState:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},options:function(){return h.values.map((function(e){return{value:e,text:e.name}}))}}},q=U,X=n("2877"),Y=Object(X["a"])(q,H,F,!1,null,null,null),K=Y.exports;function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q={components:{StrategySelect:K,Modal:W["a"],Input:$["a"],Select:G["a"],InvalidFeedback:V["a"]},data:function(){return{model:d.createEmpty()}},computed:z({},Object(f["d"])(P,["configurations"])),methods:{show:function(){this.$refs["modal"].show()},onModalOk:function(){this.$emit("configurationCreated",this.model),this.model=d.createEmpty()},isValid:function(){return this.isValidName()&&this.isValidDuration()},isValidName:function(){var e=this.configurations.map((function(e){return e.name}));return this.model.name.length>0&&!e.includes(this.model.name)},isValidDuration:function(){return this.model.duration>0}}},Z=Q,ee=Object(X["a"])(Z,I,B,!1,null,null,null),te=ee.exports;function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re={components:{CreateConfigurationModal:te},computed:ie({},Object(f["d"])(P,["configurations","selectedConfiguration"])),mounted:function(){this.generateModel(this.configurations[0])},methods:ie({},Object(f["c"])(P,["generateModel","addConfiguration"]),{showCreateConfigurationModal:function(){this.$refs["create-configuration-modal"].show()},addAndSelectConfiguration:function(e){this.addConfiguration(e),this.generateModel(e)}})},oe=re,se=Object(X["a"])(oe,a,c,!1,null,null,null),ae=se.exports,ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"time-display"},[n("div",{staticClass:"btn-group time-display__button-group",attrs:{role:"group"}},[n("button",{staticClass:"btn btn-primary btn-sm",on:{click:e.togglePause}},[n("Icon",{attrs:{icon:e.running?"pause":"play"}})],1),n("button",{staticClass:"btn btn-primary btn-sm dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e._v(" "+e._s(e.speedup)+" ")]),n("div",{staticClass:"dropdown-menu"},e._l([.5,1,2,5,10],(function(t){return n("a",{key:t,staticClass:"dropdown-item",on:{click:function(n){return e.setSpeedup(t)}}},[e._v(" "+e._s(t)+" ")])})),0)]),n("span",[e._v(e._s(e.timeSeconds))]),n("VueSlider",{staticStyle:{"padding-left":"1rem",width:"100%"},attrs:{max:e.maxTimeSeconds},on:{"drag-start":e.onDragStart,"drag-end":e.onDragEnd},model:{value:e.timeSeconds,callback:function(t){e.timeSeconds=t},expression:"timeSeconds"}})],1)},le=[],ue=n("4971"),de=n.n(ue),he=(n("24df"),30),fe=1e3/he,pe="timer",ve={time:0,maxTime:1e5,running:!1,speedup:1},me={setTime:function(e,t){e.time=t},setMaxTime:function(e,t){e.maxTime=t},setSpeedup:function(e,t){e.speedup=t},increment:function(e,t){e.time+=t},reset:function(e){e.time=0,e.running=!0},pause:function(e){e.running=!1},resume:function(e){e.running=!0}},be={startTimerLoop:function(e){var t=e.state,n=e.commit;setInterval((function(){t.running&&t.time<t.maxTime&&n("increment",fe*t.speedup)}),fe)}},ge={namespaced:!0,state:ve,mutations:me,actions:be};function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var we={components:{VueSlider:de.a},data:function(){return{wasRunningBeforeDrag:!0}},computed:Oe({},Object(f["d"])(pe,["time","maxTime","running","speedup"]),{timeSeconds:{get:function(){var e=this.time;return Math.round(e/1e3)},set:function(e){var t=1e3*e;this.setTime(t)}},maxTimeSeconds:function(){return this.maxTime/1e3}}),mounted:function(){window.addEventListener("keydown",this.onKeyDown)},destroyed:function(){window.removeEventListener("keydown",this.onKeyDown)},methods:Oe({},Object(f["c"])(pe,["pause","resume","setTime","setSpeedup"]),{togglePause:function(){this.running?this.pause():this.resume()},onDragStart:function(){this.wasRunningBeforeDrag=this.running,this.pause()},onDragEnd:function(){this.wasRunningBeforeDrag&&this.resume()},onKeyDown:function(e){"Space"===e.code&&this.togglePause()}})},Ce=we,_e=(n("41ad"),Object(X["a"])(Ce,ce,le,!1,null,"6f321b09",null)),je=_e.exports,ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card h-100"},[n("div",{staticClass:"card-header"},[n("ul",{staticClass:"nav nav-pills card-header-pills"},[n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",class:{active:e.activeTab===e.TAB_GENERAL},attrs:{href:"#"},on:{click:function(t){e.activeTab=e.TAB_GENERAL}}},[e._v(" Configuration ")])]),n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",class:{active:e.activeTab===e.TAB_DETAIL},attrs:{href:"#"},on:{click:function(t){e.activeTab=e.TAB_DETAIL}}},[e._v(" Selection ")])])])]),n("div",{staticClass:"card-body"},[e.activeTab===e.TAB_GENERAL?[n("ConfigurationDetails",{attrs:{model:e.model}})]:e._e(),e.activeTab===e.TAB_DETAIL?[e.selectionMode===e.SelectionMode.NONE?[n("p",[e._v("Click on a storage cell or drone to see more information about that cell.")])]:e.selectionMode===e.SelectionMode.CELL?[n("CellDetails",{attrs:{cell:e.selection.selectedCell}})]:e.selectionMode===e.SelectionMode.DRONE?[n("DroneDetails",{attrs:{drone:e.selection.selectedDrone}})]:e._e()]:e._e()],2)])},xe=[],De=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h4",{staticClass:"card-title text-center"},[e._v("Configuration: "+e._s(e.selectedConfiguration.name))]),n("table",{staticStyle:{width:"100%"}},[n("tbody",[n("h6",[e._v("Dimensions")]),n("tr",[n("td",[e._v("Aisles")]),n("td",[e._v(e._s(e.selectedConfiguration.aisles))])]),n("tr",[n("td",[e._v("Blocks")]),n("td",[e._v(e._s(e.selectedConfiguration.blocks))])]),n("tr",[n("td",[e._v("Cells per block")]),n("td",[e._v(e._s(e.selectedConfiguration.cellsPerBlock))])]),n("tr",[n("td",[e._v("Storage cells")]),n("td",[e._v(e._s(e.nCells))])]),n("h6",{staticClass:"mt-2"},[e._v("Other")]),n("tr",[n("td",[e._v("Duration")]),n("td",[e._v(e._s(e.durationSeconds)+"s")])]),n("tr",[n("td",[e._v("Drones")]),n("td",[e._v(e._s(e.nDrones))])]),n("tr",[n("td",[e._v("Strategy")]),n("td",[e._v(e._s(e.selectedConfiguration.strategy.name))])])])])])},Se=[];n("0481"),n("4069");function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ae={props:{model:{type:O,required:!0}},computed:Te({},Object(f["d"])(P,["selectedConfiguration"]),{nDrones:function(){return this.model.drones.length},nCells:function(){return this.model.cells.flat().filter((function(e){return e.isStorageCell})).length},durationSeconds:function(){return this.model.calculateExecutionTime()/1e3}})},Pe=Ae,Ne=Object(X["a"])(Pe,De,Se,!1,null,"623eee92",null),Re=Ne.exports,Me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h4",{staticClass:"text-center"},[e._v("Storage cell")]),n("h6",[e._v("General information")]),n("table",{staticClass:"w-100"},[n("tbody",[n("tr",[n("td",[e._v("Position")]),n("td",[e._v(e._s(e.cell.toString()))])]),n("tr",[n("td",[e._v("Time since last scan")]),n("td",[e._v(e._s(e.lastTimeScannedSeconds))])])])]),n("h6",{staticClass:"mt-4"},[e._v("Visited by")]),n("VisitsTable",{attrs:{visits:e.cell.visits,showDroneColumn:""}})],1)},Le=[],Ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"visitsTableWrapper",staticClass:"visits-table__wrapper"},[n("table",{staticClass:"table"},[n("thead",[n("tr",[e.showDroneColumn?n("th",[e._v("Drone")]):e._e(),e.showCellColumn?n("th",[e._v("Cell")]):e._e(),n("th",[e._v("On")])])]),n("tbody",e._l(e.visits,(function(t){return n("tr",{key:t.on,staticClass:"drone-details__tr"},[e.showDroneColumn?n("td",[e._v(e._s(t.by.id))]):e._e(),e.showCellColumn?n("td",[e._v(e._s(t.at.toString()))]):e._e(),n("td",[e._v(e._s(t.on/1e3))])])})),0)])])},Be=[],We={props:{visits:{type:Array,required:!0},showDroneColumn:{type:Boolean,default:!1,required:!1},showCellColumn:{type:Boolean,default:!1,required:!1}},watch:{visits:function(){var e=this;i["default"].nextTick((function(){e.scrollVisitsTableWrapperToBottom()}))}},methods:{scrollVisitsTableWrapperToBottom:function(){var e=this.$refs.visitsTableWrapper;e.scrollTop=e.scrollHeight}}},$e=We,Ge=(n("45a3"),Object(X["a"])($e,Ie,Be,!1,null,"73ab425a",null)),Ve=Ge.exports;function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ue={components:{VisitsTable:Ve},props:{cell:{type:w,required:!0}},computed:Fe({},Object(f["d"])(pe,["time"]),{lastTimeScannedSeconds:function(){return Math.round((this.time-this.cell.timeAtLastScan)/1e3)}})},qe=Ue,Xe=Object(X["a"])(qe,Me,Le,!1,null,null,null),Ye=Xe.exports,Ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h4",{staticClass:"text-center"},[e._v("Drone "+e._s(e.drone.id))]),n("h6",[e._v("General information")]),n("table",{staticClass:"w-100"},[n("tbody",[n("tr",[n("td",[e._v("Speed")]),n("td",[e._v(e._s(e.drone.speed))])])])]),n("h6",{staticClass:"mt-4"},[e._v("Visits")]),n("VisitsTable",{attrs:{visits:e.drone.visits,showCellColumn:""}})],1)},Je=[],ze={components:{VisitsTable:Ve},props:{drone:{type:C,required:!0}},computed:{visits:function(){return this.drone.visits}}},Qe=ze,Ze=Object(X["a"])(Qe,Ke,Je,!1,null,null,null),et=Ze.exports,tt="TAB_GENERAL",nt="TAB_DETAIL",it={components:{DroneDetails:et,CellDetails:Ye,ConfigurationDetails:Re},props:{model:{type:O,required:!0}},data:function(){return{activeTab:tt,TAB_GENERAL:tt,TAB_DETAIL:nt,SelectionMode:b}},computed:{selection:function(){return this.model.selection},selectionMode:function(){return this.selection.mode}},watch:{selectionMode:function(e){e!==b.NONE&&(this.activeTab=nt)}}},rt=it,ot=Object(X["a"])(rt,ke,xe,!1,null,"46c819d0",null),st=ot.exports,at=n("5698"),ct=n("1157");function lt(e){return Math.floor(e/2)}var ut=function(){function e(t,n,i){Object(l["a"])(this,e),this.cellWidth=i/(3*t.nAisles),this.cellHeight=n/t.nRows,this.nodeR=Math.min(this.cellHeight/4,this.cellWidth/8)}return Object(u["a"])(e,[{key:"calculateXCell",value:function(e){var t=lt(e),n=e%2>=1?2:0;return this.cellWidth*(3*t+n)}},{key:"calculateYCell",value:function(e){return e*this.cellHeight}},{key:"calculateXNode",value:function(e){var t=this.calculateXCell(e),n=e%2<1;if(n){var i=this.cellWidth+this.cellWidth/4,r=this.cellWidth/2*(e%1);return t+i+r}var o=this.cellWidth/4,s=5*this.cellWidth/2*(e%1);return t-o+s}},{key:"calculateYNode",value:function(e){var t=this.calculateYCell(e);return t+this.cellHeight/2}}]),e}(),dt=function(){function e(t){Object(l["a"])(this,e),this.svgId=t,this.initContainer(t),this.removeAllElementsInContainer()}return Object(u["a"])(e,[{key:"initContainer",value:function(e){this.container=at["b"](e)}},{key:"removeAllElementsInContainer",value:function(){this.container.selectAll("*").remove()}},{key:"draw",value:function(e,t){this.model=e,this.time=t,this.updatePositionMapper(),this.drawEdges(),this.drawCells(),this.drawDrones()}},{key:"updatePositionMapper",value:function(){var e=ct(this.svgId).width(),t=ct(this.svgId).height();this.mapper=new ut(this.model,t,e)}},{key:"drawDrones",value:function(){this.drawDroneNodes(),this.drawDroneIds()}},{key:"drawDroneNodes",value:function(){var e=this,t=this.model.drones,n=this.model.selection,i=this.selectOrCreateElements("drone","circle",t);i.attr("cx",(function(t){return e.mapper.calculateXNode(t.positionAt(e.time).x)})).attr("cy",(function(t){return e.mapper.calculateYNode(t.positionAt(e.time).y)})).attr("r",this.mapper.nodeR).on("click",(function(e){return n.selectedDrone=e}))}},{key:"drawDroneIds",value:function(){var e=this,t=this.model.drones,n=this.selectOrCreateElements("drone-id","text",t);n.attr("x",(function(t){return e.mapper.calculateXNode(t.positionAt(e.time).x)})).attr("y",(function(t){return e.mapper.calculateYNode(t.positionAt(e.time).y)+e.mapper.nodeR/2})).style("font-size","".concat(1.5*this.mapper.nodeR,"px")).text((function(e){return e.id}))}},{key:"drawEdges",value:function(){var e=this,t=this.model.edges,n=this.selectOrCreateElements("edge","line",t);n.attr("x1",(function(t){return e.mapper.calculateXNode(t.a.x)})).attr("y1",(function(t){return e.mapper.calculateYNode(t.a.y)})).attr("x2",(function(t){return e.mapper.calculateXNode(t.b.x)})).attr("y2",(function(t){return e.mapper.calculateYNode(t.b.y)}))}},{key:"drawCells",value:function(){var e=this.model.cells,t=e.flat(),n=t.filter((function(e){return e.isStorageCell}));this.drawStorageCells(n),this.drawCellNodes(t)}},{key:"drawStorageCells",value:function(e){var t=this,n=this.selectOrCreateElements("cell","rect",e);n.attr("x",(function(e){return t.mapper.calculateXCell(e.x)})).attr("y",(function(e){return t.mapper.calculateYCell(e.y)})).attr("width",this.mapper.cellWidth).attr("height",this.mapper.cellHeight).call((function(e){return t.addCommonCellModifications(e)}))}},{key:"drawCellNodes",value:function(e){var t=this,n=this.selectOrCreateElements("cell-node","circle",e);n.attr("cx",(function(e){return t.mapper.calculateXNode(e.x)})).attr("cy",(function(e){return t.mapper.calculateYNode(e.y)})).attr("r",this.mapper.nodeR).call((function(e){return t.addCommonCellModifications(e)}))}},{key:"addCommonCellModifications",value:function(e){var t=this,n=this.model.selection;return e.style("fill",(function(e){return t.calculateCellColor(e)})).filter((function(e){return e.isStorageCell})).classed("cell--selection",(function(e){return e===n.selectedCell})).classed("cell--hover",(function(e){return e===n.hoveredCell})).on("mouseover",(function(e){return n.hoveredCell=e})).on("mouseleave",(function(){return n.hoveredCell=null})).on("click",(function(e){return n.selectedCell=e}))}},{key:"calculateCellColor",value:function(e){if(!e.isStorageCell)return"gray";var t=25e3,n=at["a"]().domain([0,t/2,t]).range(["green","yellow","red"]);return n(e.timeSinceLastScanAt(this.time))}},{key:"selectOrCreateElements",value:function(e,t,n){var i=this.container.selectAll(".".concat(e)).data(n);return i.enter().append(t).classed(e,!0),i.exit().remove(),i}}]),e}(),ht=function(){function e(t){Object(l["a"])(this,e),this.currentTime=0,this.indexOfNextAction=0,this.actions=t}return Object(u["a"])(e,[{key:"moveStateTo",value:function(e){var t=e<this.currentTime;t&&this.rewindTo(e),this.forwardTo(e),this.currentTime=e}},{key:"forwardTo",value:function(e){while(this.hasNextAction()&&this.shouldExecuteNextAction(e))this.nextAction.execute(),this.indexOfNextAction++}},{key:"shouldExecuteNextAction",value:function(e){return this.nextAction.executionTime<=e}},{key:"hasNextAction",value:function(){return this.indexOfNextAction<this.actions.length}},{key:"rewindTo",value:function(e){while(this.hasPreviousAction()&&this.shouldUndoPreviousAction(e))this.previousAction.undo(),this.indexOfNextAction--}},{key:"shouldUndoPreviousAction",value:function(e){return this.previousAction.executionTime>=e}},{key:"hasPreviousAction",value:function(){return this.indexOfNextAction>0}},{key:"nextAction",get:function(){return this.actions[this.indexOfNextAction]}},{key:"previousAction",get:function(){return this.actions[this.indexOfNextAction-1]}}]),e}(),ft=(n("e01a"),n("d28b"),n("3ca3"),function(){function e(t,n,i){Object(l["a"])(this,e),this.executionTime=t,this.drone=n,this.direction=i}return Object(u["a"])(e,[{key:"execute",value:function(){this.saveCurrentDroneState(),this.startMovingDroneInNewDirection()}},{key:"saveCurrentDroneState",value:function(){this.previousDirection=this.drone.direction,this.previousTimeOnArrivalAtOrigin=this.drone.timeOnArrivalAtOrigin}},{key:"startMovingDroneInNewDirection",value:function(){this.drone.direction=this.direction,this.drone.timeOnArrivalAtOrigin=this.executionTime}},{key:"undo",value:function(){this.drone.direction=this.previousDirection,this.drone.timeOnArrivalAtOrigin=this.previousTimeOnArrivalAtOrigin}}]),e}()),pt=function(){function e(t,n,i){Object(l["a"])(this,e),this.executionTime=t,this.drone=n,this.direction=i}return Object(u["a"])(e,[{key:"execute",value:function(){this.drone.origin=this.drone.origin.plus(this.direction),this.drone.direction=m.NONE}},{key:"undo",value:function(){this.drone.origin=this.drone.origin.minus(this.direction)}}]),e}(),vt=function e(t,n,i){Object(l["a"])(this,e),this.at=t,this.by=n,this.on=i},mt=function(){function e(t,n,i){Object(l["a"])(this,e),this.executionTime=t,this.cell=n,this.drone=i}return Object(u["a"])(e,[{key:"execute",value:function(){this.timeAtPreviousScan=this.cell.timeAtLastScan;var e=this.cell,t=this.drone,n=this.executionTime;this.cell.timeAtLastScan=n,this.cell.visits.push(new vt(e,t,n)),this.drone.visits.push(new vt(e,t,n))}},{key:"undo",value:function(){this.cell.timeAtLastScan=this.timeAtPreviousScan,this.cell.visits.pop(),this.drone.visits.pop()}}]),e}();function bt(e,t){var n=[],i=0,r=e.origin;function o(t){var o=new ft(i,e,t);n.push(o),i+=1e3;var s=new pt(i,e,t);n.push(s),r=r.plus(t)}function s(){i+=1e3;var o=t[r.y][r.x],s=new mt(i,o,e);n.push(s)}var a=!0,c=!1,l=void 0;try{for(var u,d=e.operations[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var h=u.value;switch(h){case k.UP:o(m.UP);break;case k.DOWN:o(m.DOWN);break;case k.LEFT:o(m.LEFT);break;case k.RIGHT:o(m.RIGHT);break;case k.SCAN:s();break;default:throw Error("Could not generate action for: '".concat(h,"'"))}}}catch(f){c=!0,l=f}finally{try{a||null==d.return||d.return()}finally{if(c)throw l}}return n}function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ot={components:{ConfigurationSelector:ae,TimeDisplay:je,Details:st},data:function(){return{executor:null,drawer:null}},computed:yt({},Object(f["d"])(pe,["time"]),{},Object(f["d"])(P,["model"])),watch:{model:function(){var e=this;i["default"].nextTick((function(){e.createExecutors(),e.updateTimerSettings(),e.drawer=new dt("#svg")}))}},mounted:function(){this.startRenderLoop(),this.startTimerLoop()},methods:yt({},Object(f["c"])(pe,["resume","setMaxTime","reset"]),{},Object(f["b"])(pe,["startTimerLoop"]),{createExecutors:function(){var e=this,t=this.model.drones.flatMap((function(t){return bt(t,e.model.cells)})).sort((function(e,t){return e.executionTime-t.executionTime}));this.executor=new ht(t)},updateTimerSettings:function(){var e=this.model.calculateExecutionTime();this.setMaxTime(e),this.reset()},startRenderLoop:function(){var e=this;setInterval((function(){e.model&&(e.executor.moveStateTo(e.time),e.drawer.draw(e.model,e.time))}),fe)}})},wt=Ot,Ct=(n("5c0b"),Object(X["a"])(wt,r,o,!1,null,null,null)),_t=Ct.exports;i["default"].use(f["a"]);var jt=new f["a"].Store({modules:{model:L,timer:ge}}),kt=(n("4989"),n("ab8b"),n("2dd8"),n("ecee")),xt=n("ad3d"),Dt=n("c074");kt["c"].add(Dt["a"]),i["default"].component("Icon",xt["a"]),i["default"].config.productionTip=!1,new i["default"]({store:jt,render:function(e){return e(_t)}}).$mount("#app")},dcdd:function(e,t,n){}});
//# sourceMappingURL=app.cc7a1473.js.map